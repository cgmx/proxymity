"use strict";var proxymity=function(e){function t(e){return Array.prototype.slice.call(e||[])}function n(e,t){var n,r,o;return void 0===t||e>t?(r=e,n=t||0):(n=e,r=t),o=r-n,Math.round(Math.random()*(o+.9998)-.4999)+n}var r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_";function o(e=16){for(var t=r[n(51)],o=1;o<e;o++)t+=r[n(62)];return t}function a(e,t){var n=Object.getOwnPropertyNames(t);for(var r in e)t[r]=e[r],n.splice(n.indexOf(r),1);n.forEach(function(e){delete t[e]})}var i=function(){var e=o(n(32,48)),t=!1,r=[];return window.addEventListener("message",function(a){if(a.data===e){a.stopPropagation();var i=r;e=o(n(32,48)),t=!1,r=[],i.forEach(function(e){e()})}}),function(n){t||(window.postMessage(e,"*"),t=!0),r.push(n)}}();var c={objectify:function(){if(Array.isArray(this))var e=[];else e={};var t=Object.getOwnPropertyNames(this);for(var n in t){var r=t[n];"object"==typeof this[r]&&this[r].objectify?e[r]=this[r].objectify():e[r]=this[r]}return e},stringify:function(){var e=t(arguments);return e.unshift(c.objectify.call(this)),JSON.stringify.apply(JSON,e)},toString:function(){return Object.getOwnPropertyNames(this).length?c.stringify.call(this):""}};c[Symbol.toPrimitive]=function(e){return"number"==e?Object.getOwnPropertyNames(this).length:"string"==e?c.toString.call(this):!!Object.getOwnPropertyNames(this).length};var u=Object.create(Array.prototype);Object.getOwnPropertyNames(c).forEach(function(e){u[e]=c[e]});var f=o(n(32,48)),s=o(n(32,48)),l=o(n(32,48));function p(t,n,r){r=r||t;var o=t.textContent;if(o.match(/\{\{([\s\S]*?)\}\}/g))var a=n.watch("asyncstart",function(n){var a;e:for(var i in n)if("set:"===i.substring(0,4)){!0;break e}t.textContent=(a=r,o.replace(/\{\{([\s\S]*?)\}\}/g,function(t,n){try{return e.call(a,n)}catch(e){console.warn("failed to render expression ["+n+"]",e)}}))});return function(){t.textContent=o,a&&a()}}var h=Object.create(Array.prototype);function v(e,n){t(e).forEach(function(e,t,r){n(e),v(e.childNodes,n)})}h.appendTo=function(e){if("string"==typeof e)return h.appendTo.call(this,document.querySelector(e));var t=e;return this.forEach(function(e){t.appendChild(e)}),this},h.detach=function(){return this.forEach(function(e){var t=e.parentElement;t&&t.removeChild(e)}),this};var y=o(n(32,48));function d(r,i,c,u="data"){if("string"==typeof r){var s=document.createElement("template");return s.innerHTML=r.trim(),d(s.content.childNodes,i,c,u)}if(r instanceof NodeList||r instanceof Array&&r.reduce(function(e,t){return e&&t instanceof Node},!0)){var l,g=[],m=t(r),b=function(e){if(l)throw new error("Impropert usage of key(string).in(array): key(string) cannot be nested on the same level");return l={key:e},b};return b.in=function(e){if(!l)throw new Error("Impropert usage of key(string).in(array): key(string) not called");if(l.source)throw new Error("Impropert usage of key(string).in(array): in(array) called before key");if(!Array.isArray(e)||!e[f])throw new Error("Impropert usage of key(string).in(array): in(array) is not provided with a proxified array");l.source=e,l.elements=[]},b.end=function(e){if(!(l&&l.key&&l.source&&l.elements&&l.elements.length))throw new Error("Impropert usage of key.end([onClone]): key(string).in(array) is not called properly prior to calling key.end([onClone])");l.outputList=m,l.insertBefore=l.elements.pop(),"function"==typeof e&&(l.onClone=e),g.push.apply(g,l.elements);for(var t=m.length-1;t>=0;t--)-1!==g.indexOf(m[t])&&m.splice(t,1);l.insertAfter=l.insertBefore.previousSibling,function(e,t,n,r){r.source.length;var o=e.last("get").value,a=function(o){if(void 0!==o){var a,i,c,u,f=r.outputList.indexOf(r.insertBefore),s=r.outputList.indexOf(r.insertAfter),l=r.outputList,p=r.insertBefore.parentNode,h=(a=l.slice(s+1,f),i=r.key,c=[],a.forEach(function(e){var t=e[i];c[t]=c[t]||[],c[t].push(e)}),c);if(h.length<r.source.length)for(;h.length!==r.source.length;){var g=r.elements.map(function(e){return e.cloneNode(!0)});v(g,function(e){Object.defineProperty(e,r.key,{configurable:!0,enumerable:!1,get:function(e){return e}.bind(e,h.length)})}),d(g,t,e,n),p&&g.forEach(function(e){p.insertBefore(e,r.insertBefore)}),l.splice.apply(l,[f,0].concat(g)),f+=g.length,h.push(g)}else if(h.length>r.source.length)for(;h.length!==r.source.length;){var m=h.pop();console.log(m,h.length),m.forEach(function(e){l.splice(l.indexOf(e),1),e.parentNode&&e.parentNode.removeChild(e)}),v(u=m,function(e){e.dispatchEvent(new CustomEvent(y))}),u.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}}};e.watch("set:"+o,a),a(e.next("set:"+o)||e.last("set:"+o))}(c,i,u,l),l=void 0},m.forEach(function(t){if(l&&l.elements&&l.elements.push(t),t instanceof Comment&&"foreach:"===t.textContent.trim().substr(0,8).toLowerCase()&&(d(t,i,c,u),e.call(t,t.textContent,{key:b}),l&&(!l.key||!l.source||!l.elements)))throw new Error("Improper usage of key(string).in(array): in(array) not called in conjunction with key")}),m.forEach(function(e){e[u]!==i&&d(e,i,c,u)}),Object.setPrototypeOf(m,h)}if(r instanceof Node){var O=r,w=[];if(Object.defineProperty(O,u,{get:function(){return i},set:function(e){"object"==typeof e&&a(e,i)}}),w.push(function(){delete O[u]}),O instanceof CharacterData){var E=p(O,c);w.push(E)}else d(O.childNodes,i,c,u);t(O.attributes).forEach(function(t){var r="name"!==t.name&&p(t,c,O);if(r&&w.push(r),!("name"!==t.name||"INPUT"!==O.nodeName&"TEXTAREA"!==O.nodeName&"SELECT"!==O.nodeName)){var a=function(e){try{var t=e.value.toString();t!==O.value&&(O.value=t)}catch(e){O.value=null}},f="value",s=O.type.toLowerCase();"number"===s||"range"===s?(f="valueAsNumber",a=function(e){e&&"number"==typeof e.value&&e.value!==O.valueAsNumber&&(O.valueAsNumber=e.value)}):"checkbox"===s?(f="checked",a=function(e){e&&"boolean"==typeof e.value&&e.value!==O.checked&&(O.checked=e.value)}):"radio"===s?a=function(e){try{var t=e.value.toString();e&&O.value===t&&!0!==O.checked?O.checked=!0:e&&O.value!==t&&!0===O.checked&&(O.checked=!1)}catch(e){O.checked=!1}}:"date"!==s&&"month"!==s&&"week"!==s&&"time"!==s&&"datetime-local"!==s||(f="valueAsDate",a=function(e){e&&e.value instanceof Date&&e.value.getTime()!==O.valueAsDate.getTime()&&(O.valueAsDate=e.value)}),function t(n,r,o,a,i,c,u){e.call(n,"this."+r+("["===i[0]?"":".")+i);var f=o.last("get").value,s={};for(var l in c){var p=l+":"+f;u.push(s[l]=o.watch(p,c[l])),c[l](o.next(p)||o.last(p))}u.push(s[f]=o.watch("remap:"+f,function(){for(var e in s){s[e]();var f=u.indexOf(s[e]);f>-1&&u.splice(f,1)}t(n,r,o,a,i,c,u)}))}(O,u,c,i,t.value,{set:a,del:function(e){"object"==typeof e&&(O.value=null)}},w);var l=["change","keyup","propertychange","valuechange","input"],h=function(r){var a=o(n(32,48));e.call(O,"this."+u+("["===t.value[0]?"":".")+t.value+" = "+a,{[a]:O[f]})};l.forEach(function(e){O.addEventListener(e,h)}),w.push(function(){l.forEach(function(e){O.removeEventListener(e,h)})})}});var k=function(e){e.stopPropagation(),w.forEach(function(e){e()})};return O.addEventListener(y,k),w.push(function(){O.removeEventListener(y,k)}),Object.setPrototypeOf([O],h)}}return function(e,t={},r="data"){var p=new function(){var e={},t={},n=(this.watch=function(n,r,o){var a,i;for(var c in"function"==typeof r?(a=n,i=r,o=o||{}):(a="**",i=n,o=r||{}),o)i.key=o.key;if(a.indexOf("*")>-1)var u=a.replace(/([!@#$%^&*(){}[\]\<\>:'"`\-_,./\\+-])/g,"\\$1").replace(/\\\*\\\*/g,".*").replace(/\\\*/,"[^:.]+"),f=(t[a]=t[a]||{regex:new RegExp(u),listeners:[]}).listeners;else f=e[a]=e[a]||[];return f.push(i),function(){f.splice(f.indexOf(i),1)}},{}),r=this.emit=function(r,o={}){for(var a=0;e[r]&&a<e[r].length;a++)e[r][a](o,r);for(var i in t){var c=t[i];r.match(c.regex)&&c.listeners.forEach(function(e){e(o,r)})}return n[r]=o},o={},a=0,c=0,u=!1;this.async=function(e,t={}){u||(i(function(){var e=o;if(u=!1,o={},a=0,++c>3)c=0;else{var t=Object.getOwnPropertyNames(e);t.sort(function(t,n){return e[t].order>e[n].order?1:e[t].order<e[n].order?-1:0}),r("asyncstart",{payload:e,order:t}),t.forEach(function(t){r(t,e[t])}),r("asyncend",e),u||(c=0)}}),u=!0),o[e]=t,t.order=a+=1},this.last=function(e){return n[e]},this.next=function(e){return o[e]}};p.watch("asyncstart",function(e){for(var t=0;t<e.order.length;t++)"del:"===e.order[t].substr(0,4)&&e.order.unshift(e.order.splice(t,1)[0])}),p.async("set:");var h=function e(t,r){var i,p=Object.getPrototypeOf(t);if("object"==typeof t&&(p===Object.prototype&&(i=Object.create(c))||p===Array.prototype&&(i=Object.setPrototypeOf([],u)))){var h={};h[f]=function(e){return h[e]},h[s]=function(){Object.getOwnPropertyNames(v).forEach(function(e){var t=v[e][s];"function"==typeof t&&t(),r.async("remap:"+h[e],{p:e})})},h[l]=function(){Object.getOwnPropertyNames(v).forEach(function(e){var t=v[e][l];"function"==typeof t&&t(),r.async("del:"+h[e],{p:e})})};var v=new Proxy(i,{get:function(e,t){if(t in e||t in h){if(!(t in e)&&t in h)return h[t]}else v[t]={};return h.hasOwnProperty(t)||(h[t]=o(n(32,48))),r.emit("get",{value:h[t]}),void 0===e[t]||null===e[t]?"":e[t]},set:function(t,a,i){var c=Object.getPrototypeOf(i),u=Array.isArray(t);if(u){var f=t.length;h.hasOwnProperty("length")||(h.length=o(n(32,48)))}if(!i||"object"!=typeof i||c!==Object.prototype&&c!==Array.prototype){var l=t[a]&&t[a][s];"function"==typeof l&&l(),t[a]=i}else t[a]=e(i,r);return h.hasOwnProperty(a)||(h[a]=o(n(32,48))),r.async("set:"+h[a],{value:t[a],p:a}),u&&f!==t.length&&r.async("set:"+h.length,{value:t.length,p:a}),!0},deleteProperty:function(e,t){if(t in e){var n=e[t][l];return"function"==typeof n&&n(),r.async("del:"+h[t],{value:e[t],p:t}),delete h[t],delete e[t]}return!1}});return a(t,v),v}}(t,p),v=d(e,h,p,r);return Object.defineProperty(v,r,{get:function(){return h},set:function(e){"object"==typeof e&&a(e,h)}}),v}}(function(script,contextVars={}){for(var key in contextVars)eval("var "+key+" = contextVars['"+key+"']");return eval(script)});
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
		<script src="https://unpkg.com/mobile-inspector"></script>
		<script src="proxy-bind.js"></script>
		<script src="proxymity.js"></script>
	</head>
	<body>
		<script>
			// this is genearlly the desired method of working with the object

			// testing Proxymity now
			var component = proxymity(`
				<div>
					<input name='user.name' type='text' placeholder='name'/><br>
					<input name='user.age' placeholder='age' type='number'/><br>
					<input name='user.birthday' placeholder='yyyy-mm-dd' type='date'/><br>
					<input name='user.trusted' type='checkbox'/><br>
					<textarea name='user.bio'></textarea><br>
					<select name='user.pronouns'>
						<option value="0">N/A</option>
						<option value="1">He/Him</option>
						<option value="2">She/Her</option>
						<option value="3">They/Them</option>
					</select><br>
					<div class='{{this.data.user.name.truthy && "test-1"}} {{this.data.user.age.truthy && "test-2"}}'>
						<label><input name='user.class' type='radio' value="A"/> A</label>
						<label><input name='user.class' type='radio' value="B"/> B</label>
						<label><input name='user.class' type='radio' value="C"/> C</label>
					</div><br>
					<input name='user.name' type='text' placeholder='experimenting'/><br>

					<pre>{{this.data.user.stringify(null, "    ")}}</pre>
				
					<!--repeat(this.data.options, function(item, index, whole){ 
						// item returned is the new data obj
						item.index = index
						return item
						// the item needs to re-inherit from the parent obj
					})-->
						<pre>{{this.data.stringify(null, "    ")}}</pre>
					<!--endRepeat-->

					<div>
						<label class="block">
							color: <input name="color" />
						</label> 
						<label class="block">
							background-color: <input name="background" />
						</label> 
						<label class="block">
							padding: <input name="padding" />
						</label> 
						<label class="block">
							border: <input name="border" />
						</label> 
						<label class="block">
							font-size: <input name="fontSize" />
						</label> 
						<label class="block">
							font-family: <input name="fontFace" />
						</label> 
					</div>
					<style>
						pre {
							background-color: {{this.data.background.toString() || 'initial'}};
							color: {{this.data.color.toString() || 'initial'}};
							padding: {{this.data.padding.toString() || 'initial'}};
							border: {{this.data.border.toString() || 'initial'}};
							font-size: {{this.data.fontSize.toString() || 'inherit'}};
							font-family: {{this.data.fontFace.toString() || 'sans-serif'}}, sans-serif;
						}				
						.block {
							display: block
						}		
					</style>
				</div>`, {
					user: {
						name: "Muggy8"
					}
				}
			)
			console.log(component, [component])
			document.body.appendChild(component)

			// some termporary testing for proxy-bind
			// var component = proxyBind(`
			// 	<div>
			// 		<input name='user.name' type='text' placeholder='name'/><br>
			// 		<input name='user.age' placeholder='age' type='number'/><br>
			// 		<input name='user.birthday' placeholder='yyyy-mm-dd' type='date'/><br>
			// 		<input name='user.trusted' type='checkbox'/><br>
			// 		<textarea name='user.bio'></textarea><br>
			// 		<select name='user.pronouns'>
			// 			<option value="0">N/A</option>
			// 			<option value="1">He/Him</option>
			// 			<option value="2">She/Her</option>
			// 			<option value="3">They/Them</option>
			// 		</select><br>
			// 		<div class='{{this.data.user.name && "test-1"}} {{this.data.user.age && "test-2"}}'>
			// 			<label><input name='user.class' type='radio' value="A"/> A</label>
			// 			<label><input name='user.class' type='radio' value="B"/> B</label>
			// 			<label><input name='user.class' type='radio' value="C"/> C</label>
			// 		</div><br>
			// 		<br>
			//
			// 		<input name='user.name' type='text' placeholder='experimenting'/><br>
			// 		echo {{this.data.user.name}}
			//
			// 		<pre>{{JSON.stringify(this.data.user, null, "    ")}}</pre>
			// 	</div>`
			// )
			// console.log(component, [component])
			// document.body.appendChild(component)
			/*
			// the goal is to use Object.defineProperty to set everything so we can modify the value or whatever and the data would still be bound
			var component = proxyBind(`
				<div>
					<label>
						Input Name
						<input data-bind="this.data.name"/>
					</label>
					<p class="{{!this.data.name && 'hide'}}">Hello {{this.data.name}}</p>
					<select data-bind="this.data.selected">
						<array-map data-from="this.data.selection">
							<option value="this.data.value">{{this.data.label}}</option>
						</array-map>
					</select>
				</div>
			`,
			{ // ideally optional
				name: "Naruto",
				selection: [
					{
						label: "item 1",
						value: 1
					},
					{
						label: "item 2",
						value: 2
					},
					{
						label: "item 3",
						value: 3
					},
					{
						label: "item 4",
						value: 4
					}
				]
			})
			*/
		</script>
		<style>
			.test-1 {
				border: solid 1px red;
			}
			.test-2 {
				background-color: blue;
			}
		</style>
	</body>
</html>
